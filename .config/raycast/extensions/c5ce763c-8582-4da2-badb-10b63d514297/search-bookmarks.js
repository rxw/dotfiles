"use strict";var ut=Object.create;var Y=Object.defineProperty;var ft=Object.getOwnPropertyDescriptor;var dt=Object.getOwnPropertyNames;var ht=Object.getPrototypeOf,pt=Object.prototype.hasOwnProperty;var mt=(e,r)=>{for(var t in r)Y(e,t,{get:r[t],enumerable:!0})},we=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of dt(r))!pt.call(e,a)&&a!==t&&Y(e,a,{get:()=>r[a],enumerable:!(n=ft(r,a))||n.enumerable});return e};var O=(e,r,t)=>(t=e!=null?ut(ht(e)):{},we(r||!e||!e.__esModule?Y(t,"default",{value:e,enumerable:!0}):t,e)),gt=e=>we(Y({},"__esModule",{value:!0}),e);var Gt={};mt(Gt,{default:()=>at});module.exports=gt(Gt);var rt=require("@raycast/api"),nt=require("react");var kt=require("@raycast/api");var Te=O(require("fs"));var ie=O(require("fs")),B=O(require("path"));var $e=require("@raycast/api"),ke=()=>{if(!process.env.HOME)throw new Error("$HOME environment variable is not set.");return B.default.join(process.env.HOME,"Library")},bt=(e,r)=>{let{profilePath:t}=(0,$e.getPreferenceValues)(),n;return t?n=B.default.join(t,e):n=B.default.join(ke(),...Ee,r??T,e),n};var q=()=>B.default.join(ke(),...Se),yt=e=>bt("Bookmarks",e);function xe(e){let r=[];return e.type==="folder"?e.children.forEach(t=>{r.push(...xe(t))}):e.type==="url"&&e.url&&r.push({id:e.id,url:e.url,title:e.name,lastVisited:new Date(e.date_added)}),r}var wt=e=>{let r=[];return Object.keys(e.roots).forEach(t=>{let n=e.roots[t],a=xe(n);r.push(...a)}),r},ve=async e=>{let r=yt(e);if(!ie.default.existsSync(r))throw new Error(Q);let t=await ie.default.promises.readFile(r,{encoding:"utf-8"});return wt(JSON.parse(t))};var $t=()=>{try{let e=q(),r=Te.default.readFileSync(e,"utf-8"),t=JSON.parse(r).profile.info_cache;return t?Object.keys(t)[0]:"Default"}catch{return"Default"}},Ee=["Application Support","Google","Chrome"],Se=["Application Support","Google","Chrome","Local State"],T=$t(),L="CHROME_PROFILE_KEY",Pe="CHROME_PROFILES_KEY",_e=`
  # \u{1F6A8}Error: Google Chrome browser is not installed
  ## This extension depends on Google Chrome browser. You must install it to continue.

  If you have [Homebrew](https://brew.sh/) installed then press \u23CE (Enter Key) to install Google Chrome browser.

  [Click here](https://www.google.com/chrome/) if you want to download manually.

  [![Google Chrome](https://www.google.com/chrome/static/images/chrome-logo-m100.svg)]()
`;var Ae=`
# \u{1F6A8}Error: Something happened while trying to run your command

[![Google Chrome](https://www.google.com/chrome/static/images/chrome-logo-m100.svg)]()
`,X="An Error Occurred",ee="Google Chrome not installed",Q="Google Chrome has no bookmarks.";var xt=require("react/jsx-runtime");var Re=require("react"),x=require("@raycast/api"),ce=require("child_process");var Ie=require("os"),Oe=require("path"),te=require("react/jsx-runtime"),vt=(()=>{try{return(0,ce.execSync)("brew --prefix",{encoding:"utf8"}).trim()}catch{return(0,Ie.cpus)()[0].model.includes("Apple")?"/opt/homebrew":"/usr/local"}})();function Ce(){return(0,Oe.join)(vt,"bin/brew")}function Et(e){try{return(0,ce.execSync)(`${Ce()} install --cask ${e}`,{maxBuffer:10*1024*1024})}catch(r){let t=r;throw t&&t.code===127?(t.stderr=`Brew executable not found at ${Ce()}`,t):r}}function Ue(){let[e,r]=(0,Re.useState)(!0);return(0,te.jsx)(x.Detail,{actions:(0,te.jsx)(x.ActionPanel,{children:e&&(0,te.jsx)(x.Action,{title:"Install with Homebrew",onAction:async()=>{if(!e)return;let t=new x.Toast({style:x.Toast.Style.Animated,title:"Installing..."});await t.show();try{Et("google-chrome"),await t.hide()}catch{await t.hide(),await(0,x.showToast)(x.Toast.Style.Failure,X,"An unknown error occurred while trying to install")}t.title="Installed! Please go back and try again.",t.style=x.Toast.Style.Success,await t.show(),r(!1)}})}),markdown:_e})}var z=require("@raycast/api");var De=require("react/jsx-runtime");function Le(){return(0,z.showToast)(z.Toast.Style.Failure,X,"Something happened while trying to run your command"),(0,De.jsx)(z.Detail,{markdown:Ae})}var i=require("@raycast/api");var Ne=O(require("node:process"),1),Me=require("node:util"),le=require("node:child_process"),St=(0,Me.promisify)(le.execFile);async function D(e,{humanReadableOutput:r=!0,signal:t}={}){if(Ne.default.platform!=="darwin")throw new Error("macOS only");let n=r?[]:["-ss"],a={};t&&(a.signal=t);let{stdout:s}=await St("osascript",["-e",e,n],a);return s.trim()}var M=require("@raycast/api");var u=O(require("react")),l=require("@raycast/api");var Fe=Object.prototype.hasOwnProperty;function re(e,r){var t,n;if(e===r)return!0;if(e&&r&&(t=e.constructor)===r.constructor){if(t===Date)return e.getTime()===r.getTime();if(t===RegExp)return e.toString()===r.toString();if(t===Array){if((n=e.length)===r.length)for(;n--&&re(e[n],r[n]););return n===-1}if(!t||typeof e=="object"){n=0;for(t in e)if(Fe.call(e,t)&&++n&&!Fe.call(r,t)||!(t in r)||!re(e[t],r[t]))return!1;return Object.keys(r).length===n}}return e!==e&&r!==r}var N=O(require("node:fs")),ne=O(require("node:path")),Be=O(require("node:crypto"));var Ge=require("react/jsx-runtime");var He=require("node:url");function Tt(e){let r=(0,u.useRef)(e),t=(0,u.useRef)(0);return re(e,r.current)||(r.current=e,t.current+=1),(0,u.useMemo)(()=>r.current,[t.current])}function E(e){let r=(0,u.useRef)(e);return r.current=e,r}function Pt(e,r){let t=e instanceof Error?e.message:String(e);return(0,l.showToast)({style:l.Toast.Style.Failure,title:r?.title??"Something went wrong",message:r?.message??t,primaryAction:r?.primaryAction??We(e),secondaryAction:r?.primaryAction?We(e):void 0})}var We=e=>{let r=!0,t="[Extension Name]...",n="";try{let o=JSON.parse((0,N.readFileSync)((0,ne.join)(l.environment.assetsPath,"..","package.json"),"utf8"));t=`[${o.title}]...`,n=`https://raycast.com/${o.owner||o.author}/${o.name}`,(!o.owner||o.access==="public")&&(r=!1)}catch{}let a=l.environment.isDevelopment||r,s=e instanceof Error?e?.stack||e?.message||"":String(e);return{title:a?"Copy Logs":"Report Error",onAction(o){o.hide(),a?l.Clipboard.copy(s):(0,l.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(t)}&extension-url=${encodeURI(n)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${s}
\`\`\`
`)}`)}}};function ue(e,r,t){let n=(0,u.useRef)(0),[a,s]=(0,u.useState)({isLoading:!0}),o=E(e),f=E(t?.abortable),c=E(r||[]),b=E(t?.onError),h=E(t?.onData),y=E(t?.onWillExecute),w=E(t?.failureToastOptions),P=E(a.data),v=(0,u.useRef)(null),p=(0,u.useRef)({page:0}),S=(0,u.useRef)(!1),C=(0,u.useRef)(!0),J=(0,u.useRef)(50),$=(0,u.useCallback)(()=>(f.current&&(f.current.current?.abort(),f.current.current=new AbortController),++n.current),[f]),g=(0,u.useCallback)((...I)=>{let k=$();y.current?.(I),s(d=>({...d,isLoading:!0}));let W=_t(o.current)(...I);function V(d){return d.name=="AbortError"||k===n.current&&(b.current?b.current(d):l.environment.launchType!==l.LaunchType.Background&&Pt(d,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(U){U.hide(),v.current?.(...c.current||[])}},...w.current}),s({error:d,isLoading:!1})),d}return typeof W=="function"?(S.current=!0,W(p.current).then(({data:d,hasMore:U,cursor:ct})=>(k===n.current&&(p.current&&(p.current.cursor=ct,p.current.lastItem=d?.[d.length-1]),h.current&&h.current(d,p.current),U&&(J.current=d.length),C.current=U,s(lt=>p.current.page===0?{data:d,isLoading:!1}:{data:(lt.data||[])?.concat(d),isLoading:!1})),d),d=>(C.current=!1,V(d)))):(S.current=!1,W.then(d=>(k===n.current&&(h.current&&h.current(d),s({data:d,isLoading:!1})),d),V))},[h,b,c,o,s,v,y,p,w,$]);v.current=g;let R=(0,u.useCallback)(()=>{p.current={page:0};let I=c.current||[];return g(...I)},[g,c]),F=(0,u.useCallback)(async(I,k)=>{let W;try{if(k?.optimisticUpdate){$(),typeof k?.rollbackOnError!="function"&&k?.rollbackOnError!==!1&&(W=structuredClone(P.current?.value));let V=k.optimisticUpdate;s(d=>({...d,data:V(d.data)}))}return await I}catch(V){if(typeof k?.rollbackOnError=="function"){let d=k.rollbackOnError;s(U=>({...U,data:d(U.data)}))}else k?.optimisticUpdate&&k?.rollbackOnError!==!1&&s(d=>({...d,data:W}));throw V}finally{k?.shouldRevalidateAfter!==!1&&(l.environment.launchType===l.LaunchType.Background||l.environment.commandMode==="menu-bar"?await R():R())}},[R,P,s,$]),Z=(0,u.useCallback)(()=>{p.current.page+=1;let I=c.current||[];g(...I)},[p,c,g]);(0,u.useEffect)(()=>{p.current={page:0},t?.execute!==!1?g(...r||[]):$()},[Tt([r,t?.execute,g]),f,p]),(0,u.useEffect)(()=>()=>{$()},[$]);let ot=t?.execute!==!1?a.isLoading:!1,st={...a,isLoading:ot},it=S.current?{pageSize:J.current,hasMore:C.current,onLoadMore:Z}:void 0;return{...st,revalidate:R,mutate:F,pagination:it}}function _t(e){return e===Promise.all||e===Promise.race||e===Promise.resolve||e===Promise.reject?e.bind(Promise):e}function Ve(e){return typeof e!="function"?!1:/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(e))!==null}function At(e){return e instanceof URLSearchParams?e.toString():e}function Ke(e,r=[]){function t(n){return"update"in e?e.update(n,"utf8"):e.write(n)}return{dispatch:function(n){n=At(n),n===null?this._null():this["_"+typeof n](n)},_object:function(n){let a=/\[object (.*)\]/i,s=Object.prototype.toString.call(n),o=a.exec(s)?.[1]??"unknown:["+s+"]";o=o.toLowerCase();let f=null;if((f=r.indexOf(n))>=0){this.dispatch("[CIRCULAR:"+f+"]");return}else r.push(n);if(Buffer.isBuffer(n))return t("buffer:"),t(n.toString("utf8"));if(o!=="object"&&o!=="function"&&o!=="asyncfunction")if(this["_"+o])this["_"+o](n);else throw new Error('Unknown object type "'+o+'"');else{let c=Object.keys(n);c=c.sort(),Ve(n)||c.splice(0,0,"prototype","__proto__","constructor"),t("object:"+c.length+":");let b=this;return c.forEach(function(h){b.dispatch(h),t(":"),b.dispatch(n[h]),t(",")})}},_array:function(n,a){a=typeof a<"u"?a:!1;let s=this;if(t("array:"+n.length+":"),!a||n.length<=1){n.forEach(function(c){s.dispatch(c)});return}let o=[],f=n.map(function(c){let b=Ct(),h=r.slice();return Ke(b,h).dispatch(c),o=o.concat(h.slice(r.length)),b.read().toString()});r=r.concat(o),f.sort(),this._array(f,!1)},_date:function(n){t("date:"+n.toJSON())},_symbol:function(n){t("symbol:"+n.toString())},_error:function(n){t("error:"+n.toString())},_boolean:function(n){t("bool:"+n.toString())},_string:function(n){t("string:"+n.length+":"),t(n.toString())},_function:function(n){t("fn:"),Ve(n)?this.dispatch("[native]"):this.dispatch(n.toString()),this.dispatch("function-name:"+String(n.name)),this._object(n)},_number:function(n){t("number:"+n.toString())},_xml:function(n){t("xml:"+n.toString())},_null:function(){t("Null")},_undefined:function(){t("Undefined")},_regexp:function(n){t("regex:"+n.toString())},_uint8array:function(n){t("uint8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint8clampedarray:function(n){t("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(n))},_int8array:function(n){t("int8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint16array:function(n){t("uint16array:"),this.dispatch(Array.prototype.slice.call(n))},_int16array:function(n){t("int16array:"),this.dispatch(Array.prototype.slice.call(n))},_uint32array:function(n){t("uint32array:"),this.dispatch(Array.prototype.slice.call(n))},_int32array:function(n){t("int32array:"),this.dispatch(Array.prototype.slice.call(n))},_float32array:function(n){t("float32array:"),this.dispatch(Array.prototype.slice.call(n))},_float64array:function(n){t("float64array:"),this.dispatch(Array.prototype.slice.call(n))},_arraybuffer:function(n){t("arraybuffer:"),this.dispatch(new Uint8Array(n))},_url:function(n){t("url:"+n.toString())},_map:function(n){t("map:");let a=Array.from(n);this._array(a,!0)},_set:function(n){t("set:");let a=Array.from(n);this._array(a,!0)},_file:function(n){t("file:"),this.dispatch([n.name,n.size,n.type,n.lastModified])},_blob:function(){throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){t("domwindow")},_bigint:function(n){t("bigint:"+n.toString())},_process:function(){t("process")},_timer:function(){t("timer")},_pipe:function(){t("pipe")},_tcp:function(){t("tcp")},_udp:function(){t("udp")},_tty:function(){t("tty")},_statwatcher:function(){t("statwatcher")},_securecontext:function(){t("securecontext")},_connection:function(){t("connection")},_zlib:function(){t("zlib")},_context:function(){t("context")},_nodescript:function(){t("nodescript")},_httpparser:function(){t("httpparser")},_dataview:function(){t("dataview")},_signal:function(){t("signal")},_fsevent:function(){t("fsevent")},_tlswrap:function(){t("tlswrap")}}}function Ct(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}function Rt(e,r){let t=this[e];return t instanceof Date?`__raycast_cached_date__${t.toISOString()}`:Buffer.isBuffer(t)?`__raycast_cached_buffer__${t.toString("base64")}`:r}function It(e,r){return typeof r=="string"&&r.startsWith("__raycast_cached_date__")?new Date(r.replace("__raycast_cached_date__","")):typeof r=="string"&&r.startsWith("__raycast_cached_buffer__")?Buffer.from(r.replace("__raycast_cached_buffer__",""),"base64"):r}function ze(e){let r=Be.default.createHash("sha1");return Ke(r).dispatch(e),r.digest("hex")}var Ot=Symbol("cache without namespace"),je=new Map;function _(e,r,t){let n=t?.cacheNamespace||Ot,a=je.get(n)||je.set(n,new l.Cache({namespace:t?.cacheNamespace})).get(n);if(!a)throw new Error("Missing cache");let s=E(e),o=E(r),f=(0,u.useSyncExternalStore)(a.subscribe,()=>{try{return a.get(s.current)}catch(y){console.error("Could not get Cache data:",y);return}}),c=(0,u.useMemo)(()=>{if(typeof f<"u"){if(f==="undefined")return;try{return JSON.parse(f,It)}catch(y){return console.warn("The cached data is corrupted",y),o.current}}else return o.current},[f,o]),b=E(c),h=(0,u.useCallback)(y=>{let w=typeof y=="function"?y(b.current):y;if(typeof w>"u")a.set(s.current,"undefined");else{let P=JSON.stringify(w,Rt);a.set(s.current,P)}return w},[a,s,b]);return[c,h]}var j=Symbol();function Je(e,r,t){let{initialData:n,keepPreviousData:a,internal_cacheKeySuffix:s,...o}=t||{},f=(0,u.useRef)(null),[c,b]=_(ze(r||[])+s,j,{cacheNamespace:ze(e)}),h=(0,u.useRef)(c!==j?c:n),y=(0,u.useRef)(void 0),{mutate:w,revalidate:P,...v}=ue(e,r||[],{...o,onData($,g){y.current=g,o.onData&&o.onData($,g),!(g&&g.page>0)&&(f.current="promise",h.current=$,b($))}}),p,S=v.pagination;y.current&&y.current.page>0&&v.data?p=v.data:f.current==="promise"?p=h.current:a&&c!==j?(p=c,S&&(S.hasMore=!0,S.pageSize=c.length)):a&&c===j?p=h.current:c!==j?(p=c,S&&(S.hasMore=!0,S.pageSize=c.length)):p=n;let C=E(p),J=(0,u.useCallback)(async($,g)=>{let R;try{if(g?.optimisticUpdate){typeof g?.rollbackOnError!="function"&&g?.rollbackOnError!==!1&&(R=structuredClone(C.current));let F=g.optimisticUpdate(C.current);f.current="cache",h.current=F,b(F)}return await w($,{shouldRevalidateAfter:g?.shouldRevalidateAfter})}catch(F){if(typeof g?.rollbackOnError=="function"){let Z=g.rollbackOnError(C.current);f.current="cache",h.current=Z,b(Z)}else g?.optimisticUpdate&&g?.rollbackOnError!==!1&&(f.current="cache",h.current=R,b(R));throw F}},[b,w,C,h,f]);return(0,u.useEffect)(()=>{c!==j&&(f.current="cache",h.current=c)},[c]),{data:p,isLoading:v.isLoading,error:v.error,mutate:y.current&&y.current.page>0?w:J,pagination:S,revalidate:P}}function fe(e,r){try{let t=o=>o.startsWith("http")?o:`https://${o}`,a=(typeof e=="string"?new He.URL(t(e)):e).hostname;switch(process.env.FAVICON_PROVIDER??"raycast"){case"none":return{source:r?.fallback??l.Icon.Link,mask:r?.mask};case"apple":return{source:r?.fallback??l.Icon.Link,mask:r?.mask};case"duckduckgo":case"duckDuckGo":return{source:`https://icons.duckduckgo.com/ip3/${a}.ico`,fallback:r?.fallback??l.Icon.Link,mask:r?.mask};case"google":return{source:`https://www.google.com/s2/favicons?sz=${r?.size??64}&domain=${a}`,fallback:r?.fallback??l.Icon.Link,mask:r?.mask};case"legacy":case"raycast":default:return{source:`https://api.ray.so/favicon?url=${a}&size=${r?.size??64}`,fallback:r?.fallback??l.Icon.Link,mask:r?.mask}}}catch(t){return console.error(t),l.Icon.Link}}async function G({url:e,query:r,profileCurrent:t,profileOriginal:n,openTabInProfile:a}){setTimeout(()=>{(0,M.popToRoot)({clearSearchBar:!0})},3e3),await Promise.all([(0,M.closeMainWindow)({clearRootSearch:!0}),Qe()]);let s="",o=f=>`
    set profile to quoted form of "${f}"
    set link to quoted form of "${e||"about:blank"}"
    do shell script "open -na 'Google Chrome' --args --profile-directory=" & profile & " " & link
  `;switch(a){case"default":s=`
        set winExists to false
        tell application "Google Chrome"
            repeat with win in every window
                if index of win is 1 then
                    set winExists to true
                    exit repeat
                end if
            end repeat

            if not winExists then
                make new window
            else
                activate
            end if

            tell window 1
                set newTab to make new tab `+(e?`with properties {URL:"${e}"}`:r?'with properties {URL:"https://www.google.com/search?q='+r+'"}':"")+`
            end tell
        end tell
        return true

  `;break;case"profile_current":s=o(t);break;case"profile_original":s=o(n);break}return await D(s)}async function Ze(e){await D(`
    tell application "Google Chrome"
      activate
      set _wnd to first window where id is ${e.windowsId}
      set index of _wnd to 1
      set active tab index of _wnd to ${e.tabIndex}
    end tell
    return true
  `)}async function Ye(e){await D(`
    tell application "Google Chrome"
      activate
      set _wnd to first window where id is ${e.windowsId}
      set index of _wnd to 1
      set active tab index of _wnd to ${e.tabIndex}
      close active tab of _wnd
    end tell
    return true
  `)}async function qe(e){await D(`
    tell application "Google Chrome"
      activate
      set _wnd to first window where id is ${e.windowsId}
      set index of _wnd to 1
      set active tab index of _wnd to ${e.tabIndex}
      tell active tab of _wnd to reload
    end tell
    return true
  `)}var Qe=async()=>{if(await M.LocalStorage.getItem("is-installed"))return;if(await D(`
set isInstalled to false
try
    do shell script "osascript -e 'exists application \\"Google Chrome\\"'"
    set isInstalled to true
end try

return isInstalled`)==="false")throw new Error(ee);M.LocalStorage.setItem("is-installed",!0)};async function de(e){await Qe(),await D(`
    set link to quoted form of "${e}"
    do shell script "open -na 'Google Chrome' --args --guest " & link
  `)}var m=require("react/jsx-runtime"),H=class{static NewTab=Lt;static TabList=Dt;static TabHistory=Nt};function Lt({query:e,url:r}){let{openTabInProfile:t}=(0,i.getPreferenceValues)(),[n]=_(L,T),a="Open Empty Tab";return e?a=`Search "${e}"`:r&&(a=`Open URL "${r}"`),(0,m.jsx)(i.ActionPanel,{title:"New Tab",children:(0,m.jsx)(i.Action,{onAction:()=>G({url:r,query:e,profileCurrent:n,openTabInProfile:t}),title:a})})}function Dt({tab:e,onTabClosed:r}){return(0,m.jsxs)(i.ActionPanel,{title:e.title,children:[(0,m.jsx)(Mt,{tab:e}),(0,m.jsx)(Wt,{tab:e}),(0,m.jsx)(i.Action,{title:"Open in Guest Window",icon:{source:i.Icon.Person},onAction:async()=>{try{await de(e.url),await(0,i.closeMainWindow)()}catch(t){throw t instanceof Error?new Error(t.message):t}}}),(0,m.jsx)(i.Action.CopyToClipboard,{title:"Copy URL",content:e.url}),(0,m.jsx)(i.Action.CopyToClipboard,{title:"Copy Title",content:e.title,shortcut:{modifiers:["cmd","shift"],key:"enter"}}),(0,m.jsx)(Ft,{tab:e,onTabClosed:r}),(0,m.jsx)(i.ActionPanel.Section,{children:(0,m.jsx)(i.Action.CreateQuicklink,{quicklink:{link:e.url,name:e.title,application:"Google Chrome"},shortcut:{modifiers:["cmd"],key:"s"}})})]})}function Nt({title:e,url:r,profile:t}){let{openTabInProfile:n}=(0,i.getPreferenceValues)(),[a]=_(L,T);return(0,m.jsxs)(i.ActionPanel,{title:e,children:[(0,m.jsx)(i.Action,{onAction:()=>G({url:r,profileOriginal:t,profileCurrent:a,openTabInProfile:n}),title:"Open"}),(0,m.jsx)(i.Action,{title:"Open in Guest Window",icon:{source:i.Icon.Person},onAction:async()=>{await de(r),await(0,i.closeMainWindow)()}}),(0,m.jsxs)(i.ActionPanel.Section,{title:"Open in profile",children:[(0,m.jsx)(i.Action,{onAction:()=>G({url:r,profileOriginal:t,profileCurrent:a,openTabInProfile:"profile_current"}),title:"Open in Current Profile"}),(0,m.jsx)(i.Action,{onAction:()=>G({url:r,profileOriginal:t,profileCurrent:a,openTabInProfile:"profile_original"}),title:"Open in Original Profile"})]}),(0,m.jsx)(i.Action.CopyToClipboard,{title:"Copy URL",content:r,shortcut:{modifiers:["cmd"],key:"c"}})]})}function Mt(e){async function r(){try{await Ze(e.tab),await(0,i.closeMainWindow)()}catch(t){throw t instanceof Error?new Error("Issue with tab: '"+e.tab.sourceLine+`'
`+t.message):t}}return(0,m.jsx)(i.ActionPanel.Item,{title:"Open Tab",icon:{source:i.Icon.Eye},onAction:r})}function Ft(e){async function r(){await Ye(e.tab),await(0,i.closeMainWindow)(),e.onTabClosed?.()}return(0,m.jsx)(i.Action,{title:"Close Tab",icon:{source:i.Icon.XMarkCircle},onAction:r,shortcut:{modifiers:["cmd","shift"],key:"w"}})}function Wt(e){async function r(){try{await qe(e.tab),await(0,i.closeMainWindow)()}catch(t){throw t instanceof Error?new Error("Issue with tab: '"+e.tab.sourceLine+`'
`+t.message):t}}return(0,m.jsx)(i.Action,{title:"Reload Tab",icon:{source:i.Icon.ArrowClockwise},onAction:r,shortcut:{modifiers:["cmd","shift"],key:"r"}})}var A=require("@raycast/api");var K=require("react/jsx-runtime"),ae=class{static TabList=jt;static TabHistory=zt};function Vt(e){let r=["javascript:","data:","about:","chrome:","file:"],t=e.toLowerCase().trim();if(r.some(n=>t.startsWith(n)))return{icon:{source:A.Icon.ExclamationMark,tintColor:A.Color.Orange},isInvalid:!0};try{return new URL(e),{icon:fe(e),isInvalid:!1}}catch{return{icon:{source:A.Icon.ExclamationMark,tintColor:A.Color.Orange},isInvalid:!0}}}function zt({profile:e,entry:{url:r,title:t,id:n},type:a}){let{icon:s,isInvalid:o}=Vt(r);return(0,K.jsx)(A.List.Item,{id:`${e}-${a}-${n}`,title:t,subtitle:r,icon:s,accessories:o?[{text:"\u26A0\uFE0F Invalid URL - Cannot open",tooltip:"This URL uses an unsupported protocol"}]:void 0,actions:(0,K.jsx)(H.TabHistory,{title:t,url:r,profile:e})})}function jt(e){return(0,K.jsx)(A.List.Item,{title:e.tab.title,subtitle:e.tab.urlWithoutScheme(),keywords:[e.tab.urlWithoutScheme()],actions:(0,K.jsx)(H.TabList,{tab:e.tab,onTabClosed:e.onTabClosed}),icon:e.useOriginalFavicon?e.tab.realFavicon():e.tab.googleFavicon()})}var he=require("react");function Xe(e){if(!e)return{includeTerms:[],excludeTerms:[]};let r=e.trim().split(/\s+/),t=[],n=[];for(let a of r)a.startsWith("\\-")&&a.length>1?t.push(a.slice(1).toLowerCase()):a.startsWith("-")&&a.length>1?n.push(a.slice(1).toLowerCase()):a.length>0&&a!=="-"&&t.push(a.toLowerCase());return{includeTerms:t,excludeTerms:n}}function et(e,r){let{includeTerms:t,excludeTerms:n}=r,a=t.length===0||t.every(o=>e.includes(o)),s=n.length===0||!n.some(o=>e.includes(o));return a&&s}var pe=require("react/jsx-runtime");function tt(e,r){let[t,n]=(0,he.useState)(!1),[a,s]=(0,he.useState)(),{isLoading:o,data:f,revalidate:c}=ue(async(h,y)=>{let w=await ve(h);s(void 0),n(w.length===0);let P=Xe(y||"");return P.includeTerms.length===0&&P.excludeTerms.length===0?w:w.filter(v=>{let p=`${v.title.toLowerCase()} ${v.url.toLowerCase()}`;return et(p,P)})},[e,r],{onError(h){h.message===ee?s((0,pe.jsx)(Ue,{})):h.message===Q?n(!0):s((0,pe.jsx)(Le,{}))}});return{errorView:a,isLoading:o,data:t?[]:f||[],revalidate:c}}var me=require("@raycast/api"),ge=require("react");var oe=require("fs");var be=require("react/jsx-runtime");async function Bt(){let e=q();if(!(0,oe.existsSync)(e))return[{name:"Default",id:"Default"}];let r=await oe.promises.readFile(e,"utf-8"),t=JSON.parse(r).profile.info_cache;return Object.entries(t).map(([n,a])=>({name:a.name,id:n}))}function ye({onProfileSelected:e}){let[r,t]=_(L,T),[n,a]=_(Pe,[{name:"Person 1",id:T}]),{data:s}=Je(Bt);return(0,ge.useEffect)(()=>{s&&(a(s),r||(s.length>0?t(s[0].id):t(T)))},[s]),(0,ge.useEffect)(()=>{r&&e?.(r)},[r]),!n||n.length<2?null:(0,be.jsx)(me.List.Dropdown,{tooltip:"Select Chrome Profile",value:r,onChange:t,children:n.map(o=>(0,be.jsx)(me.List.Dropdown.Item,{value:o.id,title:o.name},o.id))})}var se=require("react/jsx-runtime");function at(){let[e,r]=(0,nt.useState)(),[t]=_(L,T),{data:n,isLoading:a,errorView:s,revalidate:o}=tt(t,e);return s||(0,se.jsx)(rt.List,{onSearchTextChange:r,isLoading:a,throttle:!0,searchBarAccessory:(0,se.jsx)(ye,{onProfileSelected:o}),children:n?.map(f=>(0,se.jsx)(ae.TabHistory,{entry:f,profile:t,type:"Bookmark"},f.id))})}
